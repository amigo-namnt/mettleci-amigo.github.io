BEGIN HEADER
   CharacterSet "CP1252"
   ExportingTool "IBM InfoSphere DataStage Export"
   ToolVersion "8"
   ServerName "TEST1-ENGN.DATAMIGRATORS.IO"
   ToolInstanceID "dstage1"
   MDISVersion "1.0"
   Date "2020-06-02"
   Time "16.32.43"
   ServerVersion "11.5"
END HEADER
BEGIN DSROUTINES
   BEGIN DSRECORD
      Identifier "IsFeatureToggleEnabled"
      DateModified "2020-06-02"
      TimeModified "09.56.11"
      OLEType "CRoutine"
      Readonly "0"
      Category "\\Routines\\MettleCI"
      RoutineType "0"
      ArgCount "1"
      Built "1"
      SourceFlag "1"
      Version "2.0.0"
      TestValues "FEATURE_EXAMPLE\(9)asdf"
      Source =+=+=+=
FUNCTION IsFeatureToggleEnabled(Name)

Deffun DSMakeMsg(MsgTemplate, ArgList)
Equate RoutineName To "IsFeatureToggleEnabled"
Ans = 1

* If Feature name is empty, log a Warning-type message and return
    If Trim(Name) = "" Then
        Message = DSMakeMsg("No feature toggle name was specified.", "")
        GoTo ErrorExit
    End

* Retrieve the environment variable from the shell
    Call DSExecute("UNIX", "echo ${": Name :"}", Output, SystemReturnCode)  

* Check if the feature toggle is enabled
    FeatureToggle = UpCase(Trim(Output<1>))
    If FeatureToggle = "1" Or FeatureToggle = "YES" Or FeatureToggle = "Y" Or FeatureToggle = "ON" Or FeatureToggle = "TRUE" Or FeatureToggle = "T" Then
        Ans = 0
         
    End 

    GoTo NormalExit

ErrorExit:
    Call DSLogWarn(Message, RoutineName)
    Ans = 1

NormalExit:


RETURN(Ans)
=+=+=+=
      Catalog "DSU.IsFeatureToggleEnabled"
      JobType "0"
      Arguments "CRtnArgument"
      BEGIN DSSUBRECORD
         Name "Name"
         Desc "Name of Feature toggle"
         SqlType "0"
         ColScale "0"
         IOType "0"
         Nullable "0"
         Occurs "0"
         KeyPosition "0"
         Precision "0"
         SignOption "0"
         SyncIndicator "0"
         LevelNo "0"
      END DSSUBRECORD
      SkipOnNull "0"
      InvocationMethod "0"
   END DSRECORD
   BEGIN DSUBINARY
      Identifier "DSU.IsFeatureToggleEnabled"
      B1 "E1DA00B5050001000C000200000000001E001E002D002D000F001E00FF7F00000601000020000000"
      B41 "140000006F0000000EE100005A0100005A0100009B020000CC030000F40300000000000000000000"
      B81 "08000000F8000F000300B4010E0010006E00100011001200DE0212003C000000F80014000500F800"
      B121 "11000600960113000200050006000400C2000000E0000000F800160007000401030017000E001800"
      B161 "08001E00150004000700080009000A00600009000F00190019001200B40112001A00C0011A000B00"
      B201 "6E000B001B001A006E000B001C001D0022011A001D001E006E000B001F00200022011E0020002100"
      B241 "6E000B002200230022012100230024006E000B002500260022012400260027006E000B0028002900"
      B281 "2201270029002A00DE022A00DA000000F80019000300C200F6000000F8002C000C001E002B000200"
      B321 "04000C00F8000F000300F80003000D005C01F80011000D005C010044534D616B654D73674E6F2066"
      B361 "65617475726520746F67676C65206E616D6520776173207370656369666965642E44534578656375"
      B401 "7465554E49586563686F20247B7D31594553594F4E545255455444534C6F675761726E4973466561"
      B441 "74757265546F67676C65456E61626C65640301000000050000000001000000000100000005010000"
      B481 "0004090000000100000001250000000A00000004090000002F000000010400000038000000010700"
      B521 "00003C00000001010000004300000003000000000502000000010100000044000000010300000045"
      B561 "00000005030000000504000000010100000048000000050500000005060000000102000000490000"
      B601 "000507000000050800000001040000004B0000000509000000050A00000001010000004F00000005"
      B641 "0B000000050C00000004090000005000000001160000005900000000000000000000000000000008"
      B681 "00000001000100000000001400000002000100000000001C00000003000100000000002000000004"
      B721 "000100000000002800000005000100000000002F0000000600010000000000360000000700010000"
      B761 "0000003D00000008000100000000004400000009000100000000004B0000000A000100000000005C"
      B801 "0000000B000100000000006A0000000C00010000000000710000000D00030000000000780000000E"
      B841 "00040000000000244D4154524958004D736754656D706C617465004172674C69737400416E73004D"
      B881 "657373616765005F5430303031005F5430303032005F5430303033005F5430303034004F75747075"
      B921 "740053797374656D52657475726E436F64650046656174757265546F67676C65005F543030303500"
      B961 "5F5430303030004E616D6500FBFF0000FDFF060016001800FCFF0800FDFF200018006000FCFF0600"
      B1001 "FDFF06001000FBFF060008002F6F70742F49424D2F496E666F726D6174696F6E5365727665722F53"
      B1041 "65727665722F50726F6A656374732F647374616765312F4453555F42502F4453552E497346656174"
      B1081 "757265546F67676C65456E61626C65640000"
   END DSUBINARY
END DSROUTINES
